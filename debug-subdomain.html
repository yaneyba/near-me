<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Subdomain Parsing</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .debug-info { background: #f5f5f5; padding: 10px; margin: 10px 0; border-radius: 5px; }
        pre { background: #222; color: #0f0; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>Debug Subdomain Parsing</h1>
    
    <div class="debug-info">
        <h3>Current URL Info:</h3>
        <p><strong>Hostname:</strong> <span id="hostname"></span></p>
        <p><strong>Pathname:</strong> <span id="pathname"></span></p>
        <p><strong>Full URL:</strong> <span id="fullurl"></span></p>
    </div>

    <div class="debug-info">
        <h3>Test URLs:</h3>
        <ul>
            <li><a href="https://water-refill.near-me.us/">https://water-refill.near-me.us/</a></li>
            <li><a href="https://water-refill.near-me.us/san-francisco">https://water-refill.near-me.us/san-francisco</a></li>
            <li><a href="http://localhost:5173/?subdomain=water-refill">http://localhost:5173/?subdomain=water-refill</a></li>
        </ul>
    </div>

    <div class="debug-info">
        <h3>Special Services Check:</h3>
        <pre id="special-services-check"></pre>
    </div>

    <script>
        document.getElementById('hostname').textContent = window.location.hostname;
        document.getElementById('pathname').textContent = window.location.pathname;
        document.getElementById('fullurl').textContent = window.location.href;

        // Manual implementation of specialServices check
        const specialServices = [
            {
                subdomain: 'services.near-me.us',
                category: 'All Services',
                isServices: true,
                description: 'Main services directory and fallback page'
            },
            {
                subdomain: 'water-refill.near-me.us',
                category: 'Water Refill Stations',
                isPathBased: true,
                isWaterRefill: true,
                description: 'Water refill stations service (new service type)'
            }
        ];

        const isSpecialService = (hostname) => {
            return specialServices.find(service => 
                hostname === service.subdomain || hostname.includes(service.subdomain)
            ) || null;
        };

        const result = isSpecialService(window.location.hostname);
        document.getElementById('special-services-check').textContent = JSON.stringify({
            hostname: window.location.hostname,
            specialService: result,
            isWaterRefill: result?.isWaterRefill || false
        }, null, 2);
    </script>
</body>
</html>
